# Introduction

This chapter discusses:
- The basic organization of computer systems
- The major components of an operating system (OS)
- An overview of various types of computing environments
- Several open-source operating systems

---

## Overview

- **Operating System (OS)**: Software that manages *resources* and acts as an intermediary between the user/programmer and the hardware.
  - **Resources**: Primarily CPU, memory, I/O, and disk.

- **Process**: A *running* instance of a program stored on disk.
- **Thread**: A subprocess within a process.
- **CPU Scheduling**: Determines which process should use the CPU, when, and for how long.
- **Kernel**: The central component of the OS that manages the system with minimal intervention by controlling programs and allocating resources.
- **Compiler**: Required by the OS to make its binary executable. The compiler itself relies on the OS to use the hardware for compiling a program.
- **Protection**: The kernel ensures safety by preventing malicious or erroneous actions, such as incorrect memory access. It uses mechanisms like *interrupts* or *Interrupt Service Routines (ISRs)*.
- **Running Process**: A process is "running" only when it has access to the CPU. Merely being loaded into memory does not mean it is running, as the CPU executes only one process at a time.
- **Bootstrap**: A program stored in *firmware* (e.g., ROM or EPROM) that initializes the system and loads the kernel when the computer starts.

---

## Interrupts

- **Device Controller**: Hardware that interfaces with an I/O device.
- **Device Driver**: Software that manages an I/O device.
- **System Call**: A request from a process to the OS to perform a service.
- **Interrupts**: Signals generated by system calls or device controllers to notify the kernel of a request, transferring control to the kernel.
- **ISR (Interrupt Service Routine)**: A specific function created to handle a given interrupt.
- **Interrupt Vector**: A lookup table mapping interrupt numbers to their corresponding ISRs.
- **Waiting Process**: A process not currently running because it is waiting for I/O.

### Timing Diagram Example for Interrupts

```
| P1 running & makes a syscall | kernel | P2 (scheduled) | kernel | P1 (rescheduled) |
                            interrupt \                          / interrupt
                                       | I/O P1 waiting         I/O P1 ready |
```

- **Exceptions (Traps)**: Special types of interrupts generated when a process performs an invalid action, such as division by zero. The kernel typically terminates the offending process.

---

## Computer System

### Storage Device Hierarchy

```
Most frequently needed
Smallest storage
Most expensive
Fastest

      ______Registers___
     _______Cache________
    ______Main Memory______
   _________SSD_____________
  _________HDD_______________
 _______Optical Disk__________
_______Magnetic Tape___________

Slowest
Cheapest
Largest storage
Least frequently needed
```

### Types of Systems

- **Multiprocessor System**: Multiple CPUs share the same memory but each has its own registers and cache.
- **Multicore System**: Multiple cores in a single CPU chip share the same memory but each has its own registers and cache.
- **Clustered System**: Multiple computers interconnected over a network.

---

## OS Structure

- **Multiprogramming (Batch System)**: The kernel runs another process when the current one enters a waiting state, resulting in *high throughput*.
- **Timesharing (Multitasking)**: The kernel switches between processes using a *timed interrupt*, ensuring *responsiveness*.
- **Responsiveness**: The system feels interactive (multitasking illusion), although the CPU switches between tasks quickly.
- **High Throughput**: The system efficiently processes large tasks by utilizing the CPU on a single process until it enters a wait state, at which point the kernel switches to another.
- **Timed Interrupt**: A predefined time period, known as a **time quantum**, after which the kernel interrupts the running process and switches to another.
- **Dual-Mode Operation**: Differentiates between *user mode* and *kernel mode* using the *mode bit*.
  - **User Mode**: Prevents execution of privileged instructions.
  - **Kernel Mode**: Allows execution of privileged instructions (e.g., setting a timed interrupt).
  - **Mode Bit**: Indicates the current mode (1: User Mode | 0: Kernel Mode).

---

## OS as Interrupt Driven

### Summary of Interrupts

- **Exceptions/Traps**: Triggered when a process attempts an invalid action (e.g., division by zero). The kernel intervenes to handle or terminate the process.
- **System Calls**: Mechanisms through which application programs request OS-level services (e.g., memory allocation).
- **I/O Completions**: Signals from device controllers indicating the completion of an I/O request, transferring control to the OS.
- **Timed Interrupts**: Allow the OS to switch processes after the time quantum of the running process expires.

---

## OS as a Resource Manager

- **Processes, Memory, Storage, and I/O**: Managed by the OS using specialized *data structures* and *algorithms*.
- **Cache Management**: Performed by hardware using policies like replacing *least recently used (LRU)* blocks.
- **Register Allocation**: Managed by compilers to map variables to registers for optimal performance.
